Episode: 160
Title: HPR0160: DVgrab
Source: https://hub.hackerpublicradio.org/ccdn.php?filename=/eps/hpr0160/hpr0160.mp3
Transcribed: 2025-10-07 12:33:54

---

.
.
.
.
.
.
Hello everybody and welcome to this episode of Hacker Public Radio. My name is Ken Fallon
and today we're going to be talking about archiving your digital video tapes.
Now I had it on my to-do list for a long time that I needed to take copies of my video tapes
of the kids and stuff and send them on to their in-laws, the grannies and the grandads
and such. So it's been on my list but actually what prompted me to do it was an episode
with archivist Alison I think on the jumping monkeys podcast which is about to it on the
twit network. The jumping monkeys podcast itself is a podcast for parents in the digital age
yet yet yet but they actually had a good point. It's a very good point about that you in the
digital age you need to constantly be renewing your data so your photos need to be moving from
one medium to another. You need to constantly be need to be checking your hard drive to make sure
that nothing's got cropped. You need to keep it in different locations that sort of thing.
So with that in mind I decided to go do some converting of my my DV tapes and kind of
glad I did. I have a collection of about a hundred tapes and from about four years old is the
oldest one and some of the older ones already had massive corruptions and nothing too serious,
nothing that I couldn't afford to lose or I couldn't repair but it is really a good warning to
everybody out there that DV tapes are not long-term storage. Now what I actually wanted to do was
convert the tapes in raw format over to the PC and that would give me there would be no loss
of of video quality. My plan was not to do any video conversion but unfortunately it works out
that a DV tape roughly has 36 megabits per second which works out at a gigabyte every four minutes
so that's 15 gigs an hour and from my collection that would or less correspond to 115 terabytes
of data and probably in a year or two everybody would be getting that and they're mobile phone but
right now I can't afford to have 15 terabytes of data just dedicated to digital video tapes.
I didn't want to transfer the video tapes over to even more video tapes which is a renewing
process that you can do and the reason for that is that I think the tapes will be okay long and
off until the price of terabyte drives. Large storage devices come down and as everybody's
moving to the H264 standard or MBIG standard I'm as well bite the bullet and just do the conversion now.
This episode isn't going to be actually on the conversion to H264 although I will say that I used
M in order to do it. I went to did some snooping around and I found an excellent blob
blob new word an excellent blog and they blog post by Elisa Torres on how to manage your personal
videos and that's excellent it goes into the space capacity the different formats what tools you
should use and then the encoding options and I was here that I got the tip to use the
db grab command and that I used in my script with the following switches db grab space
minus open dml space size space zero space dash autospace dash t and what that what db grab
will try and do is it'll either create files of a particular file size to try and keep onto the
limit imposed by some some disk file systems fat for instance or it will split the files into
like 10 minute segments and then immediately start a new one or it will create a 100 meg files
and then start a new one and the problem with that is you'll be in the middle of a scene and you
need to do quite a bit of editing. What I wanted to do was split up save a different file for
everything that I've recorded so so the number of files would vary depending on the tape so for
instance I've met recordings of my brothers acting our drama presentations and that would obviously
be an hour long so it would be just one file of 15 gigabytes with the time named with the time
and date of the first video first frame of that video session and then for other tapes you know
it's birthday parties or whatever and you take a picture to get shots of the cake or shots of
birthdays or whatever shots of birthday candles or whatever then you tend to have like smaller
two minute segments or five minute segments and you know multiple files per per tape but that's
the way I wanted to do it because I want to store them on a on a date basis so that I can archive
archive them later based on date and time and and correspond those with my photos which are also
based on date and time. Anyway that's just how I wanted to do it how you do it is entirely up to you.
Naturally I'm using this as a tip for Linux and I wanted to script this as much as possible
so I've done a post on canfollow.com in titles archiving your DV tapes and it is basically a script
to do this one tip one tape and called thing so you put in a tape it runs this DV grab it does
the encoding and then it's over and the basis of that command is the DV grab command which
just give you one thing that the DV grab doesn't do is that when it gets to the end of the tape at
least on my camera and it didn't send the command in to stop and then move on to the next line and
that makes a bit of a problem when you want to do scripting so as it happened I did some looking
around so a lot of people complained about that post and you know how do I tell DV grab to stop
and then I remember that seeing a post on the IVA developer work site and the tip was called
controlling the duration of scheduled jobs and essentially what that it goes into over there
is the link and the show notes for this podcast essentially what that goes into is
what it does is you set a variable in a runtime that you want to run and then you have another
variable which is going to be the paid ID so you run the command DV grab space minus open dml space
minus size space zero space also space space dash t and the upper sign sign which
runs that job in the background and then immediately underneath that you run DV grab paid it's
just a variable that I want it is equal to dollar sign and the exclamation mark what that does is
it puts the paid number of the previous last process that's you've run in this shell into the
variable DV grab paid and then what it does is it goes to sleep for a specific period of time so
now I'm running the script and kicking off this DV grab job the script itself is going to go to
sleep and then after 70 minutes it's going to wake up and it's going to run the command kill minus
sig term and then the dollar DV grab paid what that's actually doing is ascending the control c
signal into the DV grab job that I've just run so as all my tapes are 60 minutes long 70 minutes
is more than ample time to to do the transfer from DV to my PC one thing you need to make sure of
is that you have enough at least 15 gigs free on your hard disk preferably more if because
if you're going to run this as a normal user which you should do you won't have that extra 10
percent that's allocated to the root user okay and then the next part of the script is the
M encoder with the obf and I'm not going to go into that it's detailed on the blog posting which
on the LinkedIn show notes but it's actually I just copied and paced that from the blog the
tourist blog and it's actually got very good pictures I'm quite happy with it the loss of
quality is is imperceptible as far as I can tell it's close enough for jazz is the same
although I've got this one single script what I actually did was I split the two processes into
two different things I had a script that ran out for file in a strict study if you I do and then
name colder commands and then when I was finished it just moved the file over to a done folder
then it just continued to loop to that and then on my laptop if you know that was in my
basement so that runs 24-7 doing the encoding and then on my laptop I would come along anytime I'm
home plug in the DV camera pick a tape put it in press use the command DV cunt rewind and have
that run for five minutes then that would stop then I would kick off the you know whether we
control seed then it would kick off the DV grab for 70 minutes then that would be control seed
then I would do for every file that it's avifall it'll copy it over as avi.temp to my server
and at the end of the transfer it would rename the file for navi.temp to whatever the file name was.avi
just and the reason I did that was so that if the server was finished encoding some of the files
that it wouldn't start encoding a file that was transferred in progress process of transferring
so I wouldn't get any crop files and then the next line on the laptop pc was to run
mp3123 which would then play a loud mp3 file which would then alert me to the effect that
I needed to go over and put in another tape and the last thing it would do was before that file
would actually do a DV cunt DV control space rewind to rewind both tapes so you rewind it at the
beginning of the session and rewind it at the end and that was that's pretty much it thank you
very much for listening again there'll be more information on this on my website kenfallon.com
linked in the show notes I'll also link to you that's a blog and the tip about controlling
the duration of scheduled jobs thank you very much for listening everybody and hope you have a
wonderful day thank you for listening to half of the radio hprsmotterbycaro.net so head on over to
mp3123.com
mp3123
