Episode: 447
Title: HPR0447: Lord Drachenblut Recovers Data After a Failed Dist-Upgrade
Source: https://hub.hackerpublicradio.org/ccdn.php?filename=/eps/hpr0447/hpr0447.mp3
Transcribed: 2025-10-07 20:45:26

---

.
And welcome to Hacker Public Radio.
Today I'll be your host, Lord Drachenblut, the digital dragon.
All right.
So recently I decided to make the jump from Kabuntu 904 to Kabuntu 910 while it's still sitting in the Alpha stages.
Unfortunately, during the upgrade or the dist upgrade process I should say,
I ran into a minor bit of problem.
My system ended up in an unbeatable state.
Now, it left me with a couple options.
One, I could sit there and fight and try to get it back to a fully functional state,
which I probably could have done, but also knowing that some of the things
between Kabuntu 904 and 910 had changed, such as the Grub2 loader was now native,
and EXT 4 support was the standard for an install.
I decided that I would just back up my data and go from there.
Well, as people who have listened to me on various things,
I tend to go with the option to do an LVM2 encrypted install.
So, recovering my data, because my backups were a little out of date, unfortunately,
which will be my subject for my next one is easy backup.
But anyway, I had to do some digging on how to recover from an LVM2 encrypted partition,
and today I want to share with you how to do that recovery.
First and foremost, I grabbed, since I already still had it, the Kabuntu 910 live CD.
And yes, you're going to need the live CD versus the alternative installer,
which I used for my install later.
But it's a pretty simple process you want to do from here.
After you have the live CD in and going in a live internet connection to the machine in question,
you want to do a sudo app get install LVM2 space crypt setup.
These two packages are required to be able to mount and read encrypted partitions.
The next thing you want to do is sudo mod probe dm slash crypt.
Then you want to do a sudo crypt setup lux capital O pe in that's lux open slash dev slash.
In my case, it was sda one followed by the word crypt one.
Now, I'm going to have to double check because my notes are a little sketchy with me at the moment.
But I believe crypt one is all one word and that's crypt the number one.
After that's done, you next want to do sudo vgscan space dash dash mkno ds make notes.
Next, you want to make a volume where you can or you want to make someplace you can mount the volume in question.
Then I just did a sudo mkdi r volume from within the live CD's home directory.
Then a simple sudo space mount space slash dev slash in my case, it was ember slash root space volume.
I should mention and I'm sorry I didn't do this to the right the first time.
But the sudo vgscan dash dash mkno ds will tell you what the name of your encrypted partition is.
Just tacking on the slash root at the end in the sudo mount slash dev slash ember slash root in my case.
We'll mount it in the volume directory you created in the home partition.
Now you can take your chosen method to recover your data.
In my case, I like to just tar up the home directory and move it off the machine with a USB hard drive of some nature or flash drive if you've got that little data.
I then proceeded to do the reinstall.
Move the tar to folder back to my home directory untard it.
Now one thing in the tar when I untar and I don't have the full string with me.
But I add the dash p option when I untar.
This will maintain the permissions that are already there.
Which if you're using the same username when you reinstall makes life a little simpler and a little faster to get back up and running.
Well, I'd like to thank you all for listening.
If you enjoyed the episode, you can send me an email at lord.drockenblut at gmail.com.
If you want, if you have anything you feel you need to add to this.
Please email me or get in contact with enigma or klatu and create your own episode.
Hacker Public Radio is a community run project and we can always use more people.
So until next time, later.
