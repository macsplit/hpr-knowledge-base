Episode: 2518
Title: HPR2518: Converting My Laptop to Dual Boot
Source: https://hub.hackerpublicradio.org/ccdn.php?filename=/eps/hpr2518/hpr2518.mp3
Transcribed: 2025-10-19 04:36:50

---

This is HBR Episode 2518 entitled, Converting My Laptop to New Almoot.
It is hosted by SteamSaner and is about 24 minutes long and can remain an explicit flag.
The summary is, Converting a Laptop to New Almoot using information from a previous HBR
episode.
This episode of HBR is brought to you by AnanasThost.com.
With 15% discount on all shared hosting with the offer code HBR15, that's HBR15.
Get your web hosting that's honest and fair at AnanasThost.com.
Hello to everyone listening to Hacker Public Radio today.
My name is Steve and I'm going to do an episode where I describe how a previous Hacker Public
Radio episode recorded by somebody else helped me solve a problem.
That particular episode was 23.05 recorded in June of last year by a contributor named
Mongo.
Now Mongo was describing how he had taken his Windows 10 laptop and converted it into
a dual boot system with Ubuntu because he was in the process of learning Linux and
needed a setup like that to help him with that.
I had commented on that episode because I thought he had done a tremendous job of giving
a tutorial on how you take a Windows 10 install and turn it into dual boot with Linux.
There are a few little gotchas and tricks along the way and he had just described them
very plainly and succinctly and I said that if ever I was faced with the need to do that,
I would be referring to that episode.
Sure enough, here recently I had the opportunity to do exactly that.
The computer that I am working with is also a laptop.
It is a Lenovo ThinkPad Model T550.
I purchased this laptop two years ago January of 2016 as a factory refurb unit from eBay.
The model was about a year old at that time so it could be as much as three years old but
still fairly modern.
It has the Intel i7 dual core CPU, it has 8GB of RAM and it had a 256GB SSD drive.
When I got the laptop, it came with a version of Windows on it, Windows 8.1 I think but
I had no intention of running that.
I'm a Linux guy, I deleted Windows completely and I first installed Linux Mint on it and
I like Linux Mint as a distribution but on this particular piece of hardware I seemed
to have some trouble with it.
It seemed to lock up from time to time and I never could quite figure out why that was.
So I ultimately switched to Ubuntu and when I did that I chose the Ubuntu variant known
as Zubuntu which is spelled XU-B-U-N-T-U.
And this variant comes with the XFCE desktop.
I had used the XFCE desktop quite extensively previously using Slackware actually and I liked
it and so I decided to go with that variant.
It was the 1604 version which is a long-term support release version of Ubuntu released
back in April of 2016.
And this laptop has worked very well under Zubuntu and I have had no complaints about
it.
The only problem is that I began finding the need to run Windows on this laptop.
The reason for that is there's a particular piece of Windows software that I want to
learn how to use and that is Fusion 360 by Autodesk.
It's a 3D modeling CAD type of software that's used a lot for CNC type work as well as
3D printing and unfortunately there just isn't much in the way of open source software
that can compete directly with Fusion 360.
It's so popular, it's got a lot of support, there's a big community around it and it's
got a lot of features, it's kind of considered industry standard for at least the hobbyist
and maker community nowadays.
And unfortunately it's not open source but it also doesn't run on Linux.
It runs on Windows or you can also run it on Mac OS 10.
It is available for free as a hobbyist or as an educational if you're a student but
you have to have Windows.
And you have to have Windows running natively on the computer, at least that's everything
I've seen suggest so, normally when I need to run something that's a Windows application
I have a Windows install sitting around that's a virtual box, virtual machine and I'll
fire that up and do what I need to do.
And I tried installing Fusion 360 on a virtual machine and it just didn't work at all.
I think it needs more native access probably to the graphics drivers for graphics acceleration,
GPU type stuff and I'm not sure what else but I needed to have Windows natively on this
computer but I didn't want to give up my Zabuntu and that means dual boot.
Now I'm faced with a couple challenges coming to this problem.
First challenge is that I no longer have any Windows install media for this laptop.
When I purchased the laptop like I said I summarily deleted every trace of Windows because
I'm a Linux guy and I didn't care.
Well now I needed it.
Now I could probably use a generic install of Windows and then go search for all kinds
of drivers and stuff to work with this particular hardware but what I really wanted I wanted
the Lenovo Windows install that came with it.
So I went to their website, the support website for Lenovo and I found that sure enough it
is possible to download the Lenovo customized image of Windows and you kind of have to jump
through some hoops and prove that you have a Lenovo computer but then you can download
it and you can download it for free one time.
I'm not exactly sure how they tell if you've done it before but that you have to go through
a process that you can only do one time but it is free that one time and when you download
it you can then put it on a USB thumb drive and use that as install media.
I put a link in the show notes to the support page that talks about how you go about doing
that in case anybody else is in that same position.
Second problem is that I didn't think that the 256GB hard drive was probably enough for
dual boot.
It was fine for the one operating system but probably needed more for two.
So I found a 512GB SSD drive on eBay and it actually even said had listed that this
laptop model was among those that were supported with this hard drive.
I'm not sure that really mattered but figured it couldn't hurt.
Third problem is I was happy with my Zibuntu setup and I didn't really want to lose it
and you know I'd be installing it new on this new hard drive.
I hoped that if I just simply copied my home directory onto the new install that everything
would kind of go back to the way it was.
I wasn't sure that was going to work but that's what I decided I was going to try.
So here's the procedure that I used to turn this laptop into dual boot and hopefully this
procedure will be of use to somebody.
The first step was I backed up my home directory.
I didn't necessarily need to do that because my home directory was going to be my old home
directory was going to be on this old hard drive that I wasn't doing anything with but
just to be sure I did a backup of the home directory as well.
I then set about replacing the hard drive.
That was actually kind of challenging because you have to take the whole bottom of the
laptop off, unscrew a number of screws and then you have to bend and pry the plastic
and you feel like you're going to break it and it's not very much fun but eventually I
got the back off and I was able to remove the old hard drive, replace it with the new
hard drive, no big problem there and get everything put back together.
So I then tried to boot from this USB thumb drive that had the Lenovo Windows image on
it.
I had a little bit of a trouble with that because I found that for some reason the bios
on this laptop had been set to legacy mode and I must have been the one that did that.
I'm not exactly sure why because Ubuntu supports the UEFI system but for some reason
I had converted it to legacy mode and that wasn't working well.
So I just simply did a reset the bios to factory and rebooted and booted off that USB
thumb drive and the Windows installer took off.
Basically it went through its whole process of first creating a Windows recovery partition
and then rebooting and then installing Windows off of that partition and then after that
I went through the whole Windows update process it took forever but it did finally get
done successfully.
I was then able to boot into Windows and use Windows.
Next step was to then use the instructions that Mongo had given in his episode when he
had started from the same place that I now am.
And so I used his instructions to first resize the Windows file system because I had installed
Windows to the entire hard drive so I resized it to half of the hard drive, basically 256
gig.
The next thing in his instructions were to turn off fast boot which I probably never would
have figured out that I needed to do and so I followed his instructions to do that.
Then he also explained how you need to go into the bios and turn off secure boot which
I do think I would have known that but it was good to have that reminder.
So then I tried to boot from the thumb drive that I have with the Zabuntu 1604 install
image and it booted and Zabuntu started to install as normal.
Now we come to a point where in the Zabuntu install it asks what type of install do you
want to do?
Long ago when he was giving his description I believe said that he had chosen basically
the manual option or something to that effect.
However I had an option that said to install alongside Windows boot manager and that sounded
good to me so I went ahead and tried that and as it turns out it worked perfectly so if
you're doing this choosing the install alongside Windows boot manager does work.
After that the install completed much much quicker than the Windows install by the way.
I then installed all the Zabuntu updates and now the last step is that I needed to copy
my home directory from the old hard drive.
That turned out to be a little bit more challenging than I was anticipating because I hadn't forgotten
but I just hadn't really thought about the fact that when I had installed Zabuntu before
I had set it up to do full hard drive encryption.
So I took this hard drive, I connected it up to a USB external driving closure thing
that I have, plugged the USB in and up comes two file systems or two partitions.
One of them is a small partition that is unencrypted that was the original boot partition.
That's what the computer would boot off of.
But then the other file system is this encrypted file system.
Well Zabuntu recognized it as an encrypted file system.
It uses this thing called LUKS or I don't know how that's pronounced.
I'm not exactly sure what that stands for but it's a common encryption protocol thing
for hard drive encryption.
It saw that that file system was that and said okay you need to enter your passphrase
so I entered the passphrase but then it says I can't mount this.
I don't know what kind of file system it is.
Well I wasn't quite sure either what the deal was.
So I ended up having to do a little bit of research on this whole thing and I have some
things in the show notes that might be useful for somebody that runs into this kind of a thing.
The way Ubuntu does the entire disk encryption and others might do this too but anyway the way
Ubuntu does it is so for a Linux install you need to have generally at least two partitions.
You need a swap partition and you need a root file system partition.
Sometimes you may want to have other partitions as well.
Well if you're doing full disk encryption that whole partition thing doesn't quite work
out because you've got a boot partition, a small boot partition and then the rest of
it is this encrypted partition and so how do you then fit the Linux partitions inside
of that encrypted partition and the way they do it is using LVM.
LVM stands for Linux volume manager and that's a whole subject by itself.
If somebody would want to do a hacker public radio episode about LVM maybe there already
is one but if not that would probably be a useful thing.
You can do all kinds of crazy things with LVM.
I have had some experience with it but I'm not an expert on it.
Basically what you do with LVM is you take a partition and you divide that you make
that into a volume, an LVM volume and then you divide that into groups called LVM groups
or volume groups which are kind of like partitions but not quite the same.
But that's how Ubuntu handles this thing.
In this encrypted partition it sets up an LVM volume and divides that into two volume
groups, one for the swap partition and one for the root file system or if you had other
partitions, other Linux partitions it would have other volume groups as well.
So Ubuntu when I plug this USB drive into it, the drive connected to USB enclosure into
it, it saw the encrypted file system.
It knew that it needed to decrypt that but it didn't know what to do with the LVM volume
underneath that.
So in the show notes I have a couple commands there that describe how you go about decrypting
an encrypted file system.
Now like I said, Ubuntu did this for me but in case you needed to do it manually, there
is a command called cryptsetup, C-R-Y-P-T-S-E-T-U-P, cryptsetup.
When you pass that an option of L-U-K-S capital O-P-E-N, Luke's open and then you specify
the partition device name which in this case is slash dev slash S-D-B-2.
It might be different if in something that you might be doing and then you give it a
label such as crypt drive.
The cryptsetup space this Luke's open with a capital O, space slash dev slash S-D-B-2,
space crypt drive.
When you do that it asks for your passphrase, it then decrypts that file system and it maps
that file system or that partition to a new device that is mounted at slash dev slash
mapper, M-A-P-P-E-R slash whatever label you gave it in this case, crypt drive.
So slash dev slash mapper slash crypt drive.
And that's what Zubuntu had automatically done for me.
Then if that was a normal Linux partition, you would be able to mount that device using
a common thing like mount, space slash dev slash mapper slash crypt drive, space slash
M-N-T or some other mount point.
But that's what Zubuntu was trying to do and said I can't do that.
Well part of the reason it couldn't do that is because LVM support was not installed
at that point.
And so I installed LVM support with the command app dash get space install space LVM.
That downloaded and installed LVM support but it still didn't work probably because there
was no LVM configuration because this was a brand new install.
And what I needed to do is I needed to be able to activate the two volume groups that
were defined in there that make up the swap and the root file system.
I found the command VG change stands for volume group change pass that a parameter of dash
AY, A for activate and the Y might be for yes I want to do this.
I'm not sure about that.
You'd have to look up the man page on VG change but VG change space dash AY magically
found the two volume groups and it activated them.
I wasn't sure that it would be able to find them.
I thought maybe I'd have to specify where they were but it found them.
It activated them and it created two new devices.
One of them was slash dev slash Zubuntu dash VG slash swap.
The other one is slash dev slash Zubuntu dash VG slash root.
Those are then my swap and root file systems for the original Zubuntu install.
I was able to mount the root file system with the normal mount space slash dev slash
Zubuntu dash VG slash root space slash MNT.
All these commands are in the show notes by the way.
And now I had my old root file system mounted at the mount point of slash MNT.
So now all I had to do was copy my home directory.
To do that I went to the new systems home directory, so CD space slash home doing this
is root by the way.
I then did CP for copy space dash RP.
The R means to do a recursive copy which means do the copy the directory and all files
and directories below it.
The P means to preserve all permissions and then space slash MNT slash home slash my
username space dot or period.
And so what that's saying is okay I'm now in the new home directory go out and copy
the username or the copy my home directory which is named with my username on the old
disk and copy it to here recursively and preserving permissions.
That process took a little while because the USBs kind of slow but once I finished that
I unmounted everything rebooted the hard drive, booted into Zubuntu and low and behold
everything was back the way I left it.
My desktop, all my desktop layout, all the little widgets and stuff I had in the tool
bar were there, everything was just the way I left it except for you know various icons
that are links to software that I had downloaded from the using apt-get you know that software
wasn't there anymore.
So all I had to do is do an apt-get install of you know whatever application and now those
icons pointed to the right thing and it just worked amazingly perfectly.
So that's the end that's that was the procedure I used to go from a Zubuntu only laptop to
a dual boot Windows and Zubuntu and I want to thank Mongo again for the episode that
he did because I would have had a hard time figuring out the Windows stuff because I'm
not a Windows guy I would have had to do some research and he had just laid it out perfectly
cleanly and so I was able to follow that.
Hopefully my description of what I went through here may help somebody to do some procedure
that they need to do and if so, hey do a follow-up episode and tell us how it went.
Well then, this will be it for me, this is Steve again for Hacker Public Radio, I hope
everybody has a good day.
You've been listening to Hacker Public Radio at HackerPublicRadio.org.
We are a community podcast network that releases shows every weekday, Monday through Friday.
Today's show, like all our shows, was contributed by an HBR listener like yourself.
If you ever thought of recording a podcast and click on our contribute link to find out
how easy it really is.
Hacker Public Radio was founded by the digital dog pound and the infonomicom computer club
and is part of the binary revolution at binrev.com.
If you have comments on today's show, please email the host directly, leave a comment on
the website or record a follow-up episode yourself, unless otherwise status, today's show
is released on the creative comments, attribution, share a live 3.0 license.
