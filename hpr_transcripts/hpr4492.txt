Episode: 4492
Title: HPR4492: How to do a distribution upgrade of an Ubuntu LTS on a Digital Ocean droplet
Source: https://hub.hackerpublicradio.org/ccdn.php?filename=/eps/hpr4492/hpr4492.mp3
Transcribed: 2025-11-22 14:58:40

---

This is Hacker Public Radio Episode 4492 for Tuesday, 21 October 2025.
Today's show is entitled How to Do a Distribution Upgrade of a Nubuntu LTS on a Digital Ocean
Droplet.
It is hosted by Rowan and is about 6 minutes long.
It carries a clean flag.
The summary is Rowan Upgrades as Ubuntu 20.04 LTS Digital Ocean Droplet to 22.04 LTS.
Welcome to another episode of Hacker Public Radio.
Today, I learned how to update my Digital Ocean Droplet running Ubuntu 20.04 to Ubuntu
22.04 LTS, but the LTS is, if anyone's up for done an upgrade, just up to raid Ubuntu
before it's usually pre-strength-forward, and overall this was, but Digital Ocean maintains
its own version of the Ubuntu Core Packages, and the normal program to release upgrade
disables any third-party repositories and just runs against the Ubuntu repositories.
Unfortunately, when you do this, you get the error message.
You can't find the Core Packages after a little duck duck going, or as it's usually
called Mugeling, I am found a podcast, a post about how you do this, because I really
am thinking, ah, do I need to go in and change my sources list and all this, and this
person, the post, that actually says, no, you do not need to mess with the sources list
that you have to do, is pass a environment variable to the do release upgrade program,
environment variable being release, creator allow third-party, set that equal to one, and
do release upgrade, but then happily use your third-party repositories while doing the
upgrade.
So then after that, it was pretty standard, yeah, let it run, let it do all the downloads,
saying, yes, I want to keep my considerations for various packages, and, you know, after
a nice cup of coffee, he's got your new 22.0 for LTS, quick reboot and test the system,
and generally, nothing, no problems, although I did run into issues running next cloud.
I have a couple other websites, one, hpr.coring.us, if you want to see the new site, so are those,
and in the future, you may already be looking at the new site, but anyway, that was a little
time, but next cloud was PHP, and I quickly realized that when looking at the status of the
Apache Server, it wasn't starting because it was still trying to load the old PHP 7.4
module, which was removed, and so I just, you know, had to enable the PHP 8.1 module.
I got my stuff closer, I did then still get a different error message about this internal
error. I found the next cloud logs, and it said it can't connect to the database, and I was
like, what's going on? And I think, oh, right, it needs a module to be able to connect to Postgres,
which is the database I'm using. Actually, which reminds me, I actually did also, there was a
message for the upgrade that Postgres 12 was obsolete, and it's been upgraded to Postgres 14,
which really is kind of old at this point, but, you know, we're an LTS behind anyway going to
22.4, but it didn't give you nice instructions on basically saying, if you want to move your
old Postgres cluster to the new Postgres cluster, you need to basically delete the current Postgres,
the default Postgres 14 cluster it created, and it gives you a nice command, PG drop cluster,
dashes stop, 14 main, and then there's a PG upgrade cluster command, and you just give it the
old cluster, and you tell it, you want to get to a new cluster, and it takes care of things right
away. So I did actually do that first before I started messing with the PHP stuff, because I knew
that was going to be an issue. So next, after getting PHP running and getting the Postgres mod
running, I did actually see next cloud running in my browser, but it was throwing one more error
that it couldn't find, the GD module. GD does the graphics module it uses when it's for the
photo album and things. So then I did have to enable that, and both the PG, the Postgres module,
in the GD module I had to install. I have notes in these, or in the show notes, there are references
to the commands that were run to make it easier for you to run into this yourself. But after
that, everything looks good. It seems to be running. I do play into upgrade to 24x4, but first thing I want
to do is move my next cloud instance from using blocks storage to using s3 storage, but that is
the project for another day. Anyway, thank you for listening, and I hope you enjoyed this episode of
a covers public radio. You have been listening to Hacker Public Radio at Hacker Public Radio does
work. Today's show was contributed by a HBR listener like yourself. If you ever thought of recording
podcast, you click on our contribute link to find out how easy it really is. Posting for HBR has
been kindly provided by an honesthost.com, the internet archive and our syncs.net.
On the Sadois status, today's show is released under Creative Commons,
Attribution 4.0 International License.
